


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <link rel="canonical" href="https://insper.github.io/SistemasHardwareSoftware/aulas/06-condicionais/">
      
      
        <meta name="author" content="Igor Montagner">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.6">
    
    
      
        <title>06 - Condicionais - Sistemas Hardware-Software - 2020/2</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.63b94e9e.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.7f672a1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#795548">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../css/printing.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="preference" data-md-color-primary="brown" data-md-color-accent="amber">
  
    
      <script>matchMedia("(prefers-color-scheme: dark)").matches&&document.body.setAttribute("data-md-color-scheme","slate")</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#06-condicionais" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      











<!--
  Copyright (c) 2016-2020 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Application header -->

<script>
  window.site_url = "https://insper.github.io/SistemasHardwareSoftware/";
</script>

<div class="md-printing-header">
  <img class="cabecalho" src="https://insper.github.io/SistemasHardwareSoftware/css/cabecalho.png">
  <img class="logo" src="https://insper.github.io/SistemasHardwareSoftware/css/logo.png">

  <div class="frontmatter">
    <div class="materia"> Sistemas Hardware-Software </div>
    <div class="professor"> Igor Montagner </div>
    <div class="semestre"> 2020/2 </div>
  </div>
</div>

<header class="md-header" data-md-component="header">

  <!-- Top-level navigation -->
  <nav class="md-header-nav md-grid" aria-label="Header">

    <!-- Link to home -->
    <a
      href="https://insper.github.io/SistemasHardwareSoftware/"
      title="Sistemas Hardware-Software - 2020/2"
      class="md-header-nav__button md-logo"
      aria-label="Sistemas Hardware-Software - 2020/2"
    >
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>

    <!-- Button to open drawer -->
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>

    <!-- Header title -->
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Sistemas Hardware-Software - 2020/2
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              06 - Condicionais
            
          </span>
        </div>
      
    </div>

    <!-- Button to open search dialogue -->
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>

      <!-- Search interface -->
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    

    <!-- Repository containing source -->
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/insper/sistemashardwaresoftware/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    sistemashardwaresoftware
  </div>
</a>
      </div>
    
  </nav>
</header>




    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://insper.github.io/SistemasHardwareSoftware/" title="Sistemas Hardware-Software - 2020/2" class="md-nav__button md-logo" aria-label="Sistemas Hardware-Software - 2020/2">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Sistemas Hardware-Software - 2020/2
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/insper/sistemashardwaresoftware/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    sistemashardwaresoftware
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../sobre/" title="Burocracias" class="md-nav__link">
      Burocracias
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Aulas
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Aulas" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Aulas
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../01-introducao/" title="01 e 02 - Exercícios de C" class="md-nav__link">
      01 e 02 - Exercícios de C
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../02-inteiros/" title="02 - Inteiros na CPU" class="md-nav__link">
      02 - Inteiros na CPU
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../03-ram/" title="03 - Representação de dados em RAM" class="md-nav__link">
      03 - Representação de dados em RAM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../04-asm-1/" title="04 - Registradores x64 e variáveis globais" class="md-nav__link">
      04 - Registradores x64 e variáveis globais
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../05-funcoes/" title="05 - Funções" class="md-nav__link">
      05 - Funções
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        06 - Condicionais
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="06 - Condicionais" class="md-nav__link md-nav__link--active">
      06 - Condicionais
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#expressoes-booleanas" class="md-nav__link">
    Expressões booleanas
  </a>
  
    <nav class="md-nav" aria-label="Expressões booleanas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arquivo-ex1" class="md-nav__link">
    Arquivo ex1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arquivo-ex2" class="md-nav__link">
    Arquivo ex2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arquivo-ex3" class="md-nav__link">
    Arquivo ex3
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#condicionais" class="md-nav__link">
    Condicionais
  </a>
  
    <nav class="md-nav" aria-label="Condicionais">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exemplo-guiado" class="md-nav__link">
    Exemplo guiado
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arquivo-ex4" class="md-nav__link">
    Arquivo ex4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arquivo-ex5" class="md-nav__link">
    Arquivo ex5
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemplo-guiado-ii" class="md-nav__link">
    Exemplo guiado II
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arquivo-ex6" class="md-nav__link">
    Arquivo ex6
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../07-loops/" title="07 - Loops" class="md-nav__link">
      07 - Loops
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../08-variaveis-locais/" title="08 - Variáveis locais" class="md-nav__link">
      08 - Variáveis locais
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../09-arrays/" title="09 - Array em Assembly" class="md-nav__link">
      09 - Array em Assembly
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../10-malloc/" title="10 - Alocação Dinâmica de Memória" class="md-nav__link">
      10 - Alocação Dinâmica de Memória
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../99-corretor-automatico/" title="99 - Corretor Automático" class="md-nav__link">
      99 - Corretor Automático
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../projetos/bomblab/" title="Projetos" class="md-nav__link">
      Projetos
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#expressoes-booleanas" class="md-nav__link">
    Expressões booleanas
  </a>
  
    <nav class="md-nav" aria-label="Expressões booleanas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arquivo-ex1" class="md-nav__link">
    Arquivo ex1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arquivo-ex2" class="md-nav__link">
    Arquivo ex2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arquivo-ex3" class="md-nav__link">
    Arquivo ex3
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#condicionais" class="md-nav__link">
    Condicionais
  </a>
  
    <nav class="md-nav" aria-label="Condicionais">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exemplo-guiado" class="md-nav__link">
    Exemplo guiado
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arquivo-ex4" class="md-nav__link">
    Arquivo ex4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arquivo-ex5" class="md-nav__link">
    Arquivo ex5
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemplo-guiado-ii" class="md-nav__link">
    Exemplo guiado II
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arquivo-ex6" class="md-nav__link">
    Arquivo ex6
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/insper/sistemashardwaresoftware/edit/master/docs/aulas/06-condicionais/index.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="06-condicionais">06 - Condicionais<a class="headerlink" href="#06-condicionais" title="Permanent link">&para;</a></h1>
<h2 id="expressoes-booleanas">Expressões booleanas<a class="headerlink" href="#expressoes-booleanas" title="Permanent link">&para;</a></h2>
<p>Vimos na expositiva que toda operação aritmética preenche as flags <code>CF</code>, <code>ZF</code>, <code>SF</code> e <code>OF</code> e que podemos usar estas flags para montar expressões booleanas com as instruções <code>set*</code>. A tabela abaixo mostra as instruções responsáveis cada tipo de expressão booleana.</p>
<p><img alt="Tabela de set para operações booleanas" src="tabela-set.png" /></p>
<p>Também vimos que podemos preencher estas flags usando as instruções <code>cmp</code> e <code>test</code>, que executam operações aritméticas (subtração e E bit a bit) mas não guardam o resultado.</p>
<p>Vamos analisar o código assembly da seguinte função:</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span> <span class="nf">igual</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="err">0000000000000000</span> <span class="err">&lt;</span><span class="nf">igual</span><span class="err">&gt;</span><span class="p">:</span>
<span class="err">0:</span>   <span class="err">39</span> <span class="nf">f7</span>                   <span class="no">cmp</span>    <span class="nv">%esi</span><span class="p">,</span><span class="nv">%edi</span>
<span class="err">2:</span>   <span class="err">0</span><span class="nf">f</span> <span class="mi">94</span> <span class="no">c0</span>                <span class="no">sete</span>   <span class="nv">%al</span>
<span class="err">5:</span>   <span class="err">0</span><span class="nf">f</span> <span class="no">b6</span> <span class="no">c0</span>                <span class="no">movzbl</span> <span class="nv">%al</span><span class="p">,</span><span class="nv">%eax</span>
<span class="err">8:</span>   <span class="nf">c3</span>                      <span class="no">retq</span>
</code></pre></div>

<p>A comparação <code>a == b</code> é feita primeiro executando <code>cmp</code> entre os argumentos <code>%edi</code> e <code>%esi</code> e depois usando <code>sete</code> (<em>set equal</em>) para atribuir 1 <code>%al</code> se <code>%edi == %esi</code> e 0 caso contrário.</p>
<p>Por fim, temos a instrução <code>movzbl</code>, que faz o cast de <code>char</code> (<code>%al</code>) para <code>int</code> (<code>%eax</code>). Lembre-se que as instruções <code>set*</code> só modificam os primeiros 8 bits de <code>%eax</code>. O restante continua com o valor antigo. Usamos <code>movzbl</code> para extender o número em <code>%al</code> para ocupar todo <code>%eax</code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>As instruções de conversão de tipos são bastante frequentes em Assembly, principalmente para expandir valores colocados em registradores menores para registradores maiores. Elas seguem a seguinte regra:</p>
<p><code>MOVtsd</code></p>
<ul>
<li><code>t</code> pode ser <code>z</code> para tipos unsigned (completando com **z**eros) e <code>s</code> para tipos signed (completando com o bit de **s**inal).</li>
<li><code>s</code> é o tamanho do registrador fonte seguindo a notação <code>b</code> para 1 byte, <code>w</code> para 2 bytes, <code>l</code> para 4 bytes e <code>q</code> para 8 bytes.</li>
<li><code>d</code> é o tamanho do registrador destino, seguinto a mesma notação acima.</li>
</ul>
</div>
<p>Por exemplo, a instrução <code>MOVZWQ</code> converte um <code>unsigned short</code> para um <code>unsigned long</code>. Conversões de 4 para 8 bytes muitas vezes são feitas com a instrução <code>cltq</code>, que extende (com sinal) <code>%eax</code> para <code>%rax</code>. Uma boa referência é este <a href="https://docs.oracle.com/cd/E19120-01/open.solaris/817-5477/eoizm/index.html">site da Oracle</a>.</p>
<p>Vamos agora praticar. Nos 3 exercícios abaixo temos funções que avaliam uma (ou mais) expressões booleanas entre seus argumentos e retornam o resultado.</p>
<h3 id="arquivo-ex1">Arquivo <code>ex1</code><a class="headerlink" href="#arquivo-ex1" title="Permanent link">&para;</a></h3>
<p>Reconstrua a função <code>ex1</code> a partir do código assembly abaixo.</p>
<div class="highlight"><pre><span></span><code><span class="err">0000000000000000</span> <span class="err">&lt;</span><span class="nf">ex1</span><span class="err">&gt;</span><span class="p">:</span>
<span class="err">0:</span>   <span class="err">83</span> <span class="nf">ff</span> <span class="mi">0</span><span class="no">a</span>                <span class="no">cmp</span>    <span class="no">$0xa</span><span class="p">,</span><span class="nv">%edi</span>
<span class="err">3:</span>   <span class="err">0</span><span class="nf">f</span> <span class="mi">9</span><span class="no">f</span> <span class="no">c0</span>                <span class="no">setg</span>   <span class="nv">%al</span>
<span class="err">6:</span>   <span class="err">0</span><span class="nf">f</span> <span class="no">b6</span> <span class="no">c0</span>                <span class="no">movzbl</span> <span class="nv">%al</span><span class="p">,</span><span class="nv">%eax</span>
<span class="err">9:</span>   <span class="nf">c3</span>                      <span class="no">retq</span>
</code></pre></div>

<div class="admonition question short">
<p class="admonition-title">Question</p>
<p>Qual é o tamanho do argumento de <code>ex1</code>? Ele é <code>signed</code> ou <code>unsigned</code>?</p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Coloque sua tradução abaixo. Valide sua solução com o professor ou com algum colega que já validou sua solução.</p>
</div>
<h3 id="arquivo-ex2">Arquivo <code>ex2</code><a class="headerlink" href="#arquivo-ex2" title="Permanent link">&para;</a></h3>
<p>Reconstrua a função <code>ex2</code> a partir do código assembly abaixo</p>
<div class="highlight"><pre><span></span><code><span class="err">0000000000000000</span> <span class="err">&lt;</span><span class="nf">ex2</span><span class="err">&gt;</span><span class="p">:</span>
   <span class="err">0:</span>   <span class="err">48</span> <span class="err">39</span> <span class="nf">f7</span>                <span class="no">cmp</span>    <span class="nv">%rsi</span><span class="p">,</span><span class="nv">%rdi</span>
   <span class="err">3:</span>   <span class="err">0</span><span class="nf">f</span> <span class="mi">96</span> <span class="no">c0</span>                <span class="no">setbe</span>  <span class="nv">%al</span>
   <span class="err">6:</span>   <span class="err">0</span><span class="nf">f</span> <span class="no">b6</span> <span class="no">c0</span>                <span class="no">movzbl</span> <span class="nv">%al</span><span class="p">,</span><span class="nv">%eax</span>
   <span class="err">9:</span>   <span class="nf">c3</span>                      <span class="no">retq</span>
</code></pre></div>

<div class="admonition question short">
<p class="admonition-title">Question</p>
<p>Qual é o tamanho dos argumentos de <code>ex2</code>? Ele é <code>signed</code> ou <code>unsigned</code>?</p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Coloque sua tradução abaixo. Valide sua solução com o professor ou com algum colega que já validou sua solução.</p>
</div>
<h3 id="arquivo-ex3">Arquivo <code>ex3</code><a class="headerlink" href="#arquivo-ex3" title="Permanent link">&para;</a></h3>
<p>Reconstrua a função <code>ex3</code> a partir do código assembly abaixo.</p>
<div class="highlight"><pre><span></span><code><span class="err">0000000000000000</span> <span class="err">&lt;</span><span class="nf">ex3</span><span class="err">&gt;</span><span class="p">:</span>
   <span class="err">0:</span>   <span class="err">48</span> <span class="err">39</span> <span class="nf">f7</span>                <span class="no">cmp</span>    <span class="nv">%rsi</span><span class="p">,</span><span class="nv">%rdi</span>
   <span class="err">3:</span>   <span class="err">0</span><span class="nf">f</span> <span class="mi">9</span><span class="no">f</span> <span class="no">c0</span>                <span class="no">setg</span>   <span class="nv">%al</span>
   <span class="err">6:</span>   <span class="err">48</span> <span class="err">85</span> <span class="nf">f6</span>                <span class="no">test</span>   <span class="nv">%rsi</span><span class="p">,</span><span class="nv">%rsi</span>
   <span class="err">9:</span>   <span class="err">0</span><span class="nf">f</span> <span class="mi">9</span><span class="no">f</span> <span class="no">c2</span>                <span class="no">setg</span>   <span class="nv">%dl</span>
   <span class="nl">c:</span>   <span class="err">21</span> <span class="nf">d0</span>                   <span class="no">and</span>    <span class="nv">%edx</span><span class="p">,</span><span class="nv">%eax</span>
   <span class="nl">e:</span>   <span class="err">0</span><span class="nf">f</span> <span class="no">b6</span> <span class="no">c0</span>                <span class="no">movzbl</span> <span class="nv">%al</span><span class="p">,</span><span class="nv">%eax</span>
  <span class="err">11:</span>   <span class="nf">c3</span>                      <span class="no">retq</span>
</code></pre></div>

<div class="admonition question short">
<p class="admonition-title">Question</p>
<p>Qual é o tamanho dos argumentos de <code>ex3</code>? Ele é <code>signed</code> ou <code>unsigned</code>?</p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Coloque sua tradução abaixo. Valide sua solução com o professor ou com algum colega.</p>
</div>
<h2 id="condicionais">Condicionais<a class="headerlink" href="#condicionais" title="Permanent link">&para;</a></h2>
<p>Vimos na segunda parte expositiva que Assembly possui apenas instruções de pulos condicionais (<code>j*</code> onde <code>*</code> representa uma comparação usando as mesmas abreviações de <code>set*</code>) e não condicionais (<code>jmp</code>). Vimos também que a combinação destas instruções com <code>cmp</code> e <code>test</code> é equivalente à dupla de comandos</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span> <span class="p">(</span><span class="n">cond</span><span class="o">-</span><span class="n">booleana</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">goto</span> <span class="n">label</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p>A tabela abaixo mostra as operações de saltos condicionais.</p>
<p><img alt="Tabela de set para saltos condicionais" src="tabela-jmp.png" />{width=400px}</p>
<h3 id="exemplo-guiado">Exemplo guiado<a class="headerlink" href="#exemplo-guiado" title="Permanent link">&para;</a></h3>
<p>Vamos agora fazer um exemplo guiado. Analisaremos o seguinte código:</p>
<div class="highlight"><pre><span></span><code><span class="mo">0000000000000000</span> <span class="o">&lt;</span><span class="n">eh_par</span><span class="o">&gt;:</span>
<span class="mi">0</span><span class="o">:</span>   <span class="mi">40</span> <span class="n">f6</span> <span class="n">c7</span> <span class="mo">01</span>             <span class="n">test</span>   <span class="err">$</span><span class="mh">0x1</span><span class="p">,</span><span class="o">%</span><span class="n">dil</span>
<span class="mi">4</span><span class="o">:</span>   <span class="mi">74</span> <span class="mo">06</span>                   <span class="n">je</span>     <span class="n">c</span> <span class="o">&lt;</span><span class="n">eh_par</span><span class="o">+</span><span class="mh">0xc</span><span class="o">&gt;</span>
<span class="mi">6</span><span class="o">:</span>   <span class="n">b8</span> <span class="mo">00</span> <span class="mo">00</span> <span class="mo">00</span> <span class="mo">00</span>          <span class="n">mov</span>    <span class="err">$</span><span class="mh">0x0</span><span class="p">,</span><span class="o">%</span><span class="n">eax</span>
<span class="nl">b</span><span class="p">:</span>   <span class="n">c3</span>                      <span class="n">retq</span>
<span class="nl">c</span><span class="p">:</span>   <span class="n">b8</span> <span class="mo">01</span> <span class="mo">00</span> <span class="mo">00</span> <span class="mo">00</span>          <span class="n">mov</span>    <span class="err">$</span><span class="mh">0x1</span><span class="p">,</span><span class="o">%</span><span class="n">eax</span>
<span class="mi">11</span><span class="o">:</span>  <span class="n">c3</span>                      <span class="n">retq</span>
</code></pre></div>

<p>Pares de instruções <code>test-j*</code> ou <code>cmp-j*</code> são comumente usadas para representar a construção <code>if-goto</code>.</p>
<ul>
<li>O nome da função dá uma dica de seu valor de retorno. Você consegue entender o porquê <code>test $1, %dil</code> faz isto? \vspace{5em}</li>
</ul>
<p>Vamos agora traduzir a função <code>eh_par</code> para <strong>gotoC</strong>. As linhas <code>0-4</code> são transformadas em um par <code>if-goto</code>. O restante são instruções que já conhecemos.</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span> <span class="nf">eh_par</span><span class="p">(</span><span class="kt">long</span> <span class="n">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">&amp;</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">goto</span> <span class="n">if1</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

    <span class="nl">if1</span><span class="p">:</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p>Tiramos então o <code>goto</code> e levando em conta sua resposta no item anterior, ficamos com o seguinte código. Note que precisamos negar a comparação feita no código anterior!</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span> <span class="nf">eh_par</span><span class="p">(</span><span class="kt">long</span> <span class="n">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p>Podemos observar duas coisas no código assembly gerado:</p>
<ol>
<li>O código que estava dentro do <code>if</code> foi colocado após o código que estava fora do if! O compilador pode mudar a ordem dos nossos blocos de código se for conveniente (para ele, não para nós).</li>
<li>A construção <code>test-j*</code> e <code>cmp-j*</code> pode ser mapeada diretamente para <code>if-goto</code>. Porém, reconstruir um código legível requer, muitas vezes, mudar código de lugar.</li>
</ol>
<p>Vamos agora praticar com alguns exercícios simples:</p>
<h3 id="arquivo-ex4">Arquivo <code>ex4</code><a class="headerlink" href="#arquivo-ex4" title="Permanent link">&para;</a></h3>
<p>Veja o código abaixo</p>
<div class="highlight"><pre><span></span><code><span class="err">0000000000000000</span> <span class="err">&lt;</span><span class="nf">fun4</span><span class="err">&gt;</span><span class="p">:</span>
<span class="err">0:</span>   <span class="err">48</span> <span class="err">85</span> <span class="nf">ff</span>                <span class="no">test</span>   <span class="nv">%rdi</span><span class="p">,</span><span class="nv">%rdi</span>
<span class="err">3:</span>   <span class="err">7</span><span class="nf">e</span> <span class="mi">0</span><span class="no">a</span>                   <span class="no">jle</span>    <span class="mh">f</span> <span class="p">&lt;</span><span class="no">fun4</span><span class="p">+</span><span class="mi">0xf</span><span class="p">&gt;</span>
<span class="err">5:</span>   <span class="nf">b8</span> <span class="mi">02</span> <span class="mi">00</span> <span class="mi">00</span> <span class="mi">00</span>          <span class="no">mov</span>    <span class="no">$0x2</span><span class="p">,</span><span class="nv">%eax</span>
<span class="nl">a:</span>   <span class="err">48</span> <span class="err">0</span><span class="nf">f</span> <span class="no">af</span> <span class="no">c6</span>             <span class="no">imul</span>   <span class="nv">%rsi</span><span class="p">,</span><span class="nv">%rax</span>
<span class="nl">e:</span>   <span class="nf">c3</span>                      <span class="no">retq</span>
<span class="nl">f:</span>   <span class="nf">b8</span> <span class="mi">01</span> <span class="mi">00</span> <span class="mi">00</span> <span class="mi">00</span>          <span class="no">mov</span>    <span class="no">$0x1</span><span class="p">,</span><span class="nv">%eax</span>
<span class="err">14:</span>  <span class="nf">eb</span> <span class="no">f4</span>                   <span class="no">jmp</span>    <span class="mh">a</span> <span class="p">&lt;</span><span class="no">fun4</span><span class="p">+</span><span class="mi">0xa</span><span class="p">&gt;</span>
</code></pre></div>

<div class="admonition question short">
<p class="admonition-title">Question</p>
<p>Qual expressão booleana é testada? </p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Faça a tradução desta função para <strong>gotoC</strong>.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Transforme o código acima em <em>C</em> legível.</p>
</div>
<h3 id="arquivo-ex5">Arquivo <code>ex5</code><a class="headerlink" href="#arquivo-ex5" title="Permanent link">&para;</a></h3>
<p>Veja o código da função abaixo.</p>
<div class="highlight"><pre><span></span><code><span class="err">0000000000000000</span> <span class="err">&lt;</span><span class="nf">ex5</span><span class="err">&gt;</span><span class="p">:</span>
<span class="err">0:</span>   <span class="err">48</span> <span class="err">85</span> <span class="nf">ff</span>                <span class="no">test</span>   <span class="nv">%rdi</span><span class="p">,</span><span class="nv">%rdi</span>
<span class="err">3:</span>   <span class="err">0</span><span class="nf">f</span> <span class="mi">9</span><span class="no">f</span> <span class="no">c2</span>                <span class="no">setg</span>   <span class="nv">%dl</span>
<span class="err">6:</span>   <span class="err">48</span> <span class="err">85</span> <span class="nf">f6</span>                <span class="no">test</span>   <span class="nv">%rsi</span><span class="p">,</span><span class="nv">%rsi</span>
<span class="err">9:</span>   <span class="err">0</span><span class="nf">f</span> <span class="mi">9</span><span class="no">e</span> <span class="no">c0</span>                <span class="no">setle</span>  <span class="nv">%al</span>
<span class="nl">c:</span>   <span class="err">84</span> <span class="nf">c2</span>                   <span class="no">test</span>   <span class="nv">%al</span><span class="p">,</span><span class="nv">%dl</span>
<span class="nl">e:</span>   <span class="err">75</span> <span class="err">05</span>                   <span class="nf">jne</span>    <span class="mh">15</span> <span class="p">&lt;</span><span class="no">ex5</span><span class="p">+</span><span class="mi">0x15</span><span class="p">&gt;</span>
<span class="err">10:</span>  <span class="err">48</span> <span class="err">8</span><span class="nf">d</span> <span class="mi">46</span> <span class="no">fe</span>             <span class="no">lea</span>    <span class="p">-</span><span class="mi">0x2</span><span class="p">(</span><span class="nv">%rsi</span><span class="p">),</span><span class="nv">%rax</span>
<span class="err">14:</span>  <span class="nf">c3</span>                      <span class="no">retq</span>
<span class="err">15:</span>  <span class="err">48</span> <span class="err">8</span><span class="nf">d</span> <span class="mi">47</span> <span class="mi">05</span>             <span class="no">lea</span>    <span class="mi">0x5</span><span class="p">(</span><span class="nv">%rdi</span><span class="p">),</span><span class="nv">%rax</span>
<span class="err">19:</span>  <span class="nf">c3</span>                      <span class="no">retq</span>
</code></pre></div>

<div class="admonition question medium">
<p class="admonition-title">Question</p>
<p>Qual são as expressões booleanas testadas? (Dica: são 3, assim como no exercício 3).</p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Faça uma tradução para <strong>gotoC</strong>.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Transforme seu código acima para <em>C</em> legível.</p>
</div>
<h3 id="exemplo-guiado-ii">Exemplo guiado II<a class="headerlink" href="#exemplo-guiado-ii" title="Permanent link">&para;</a></h3>
<p>Veremos agora um exemplo <code>if/else</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span> <span class="nf">exemplo2</span><span class="p">(</span><span class="kt">long</span> <span class="n">a</span><span class="p">,</span> <span class="kt">long</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">long</span> <span class="n">c</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">&gt;=</span> <span class="mi">5</span> <span class="o">&amp;&amp;</span> <span class="n">b</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">c</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p>Seu assembly correspondente, quando compilado com <code>gcc -Og -c</code> é</p>
<div class="highlight"><pre><span></span><code><span class="err">0000000000000000</span> <span class="err">&lt;</span><span class="nf">exemplo2</span><span class="err">&gt;</span><span class="p">:</span>
<span class="err">0:</span>   <span class="err">48</span> <span class="err">83</span> <span class="nf">ff</span> <span class="mi">04</span>             <span class="no">cmp</span>    <span class="no">$0x4</span><span class="p">,</span><span class="nv">%rdi</span>
<span class="err">4:</span>   <span class="err">0</span><span class="nf">f</span> <span class="mi">9</span><span class="no">f</span> <span class="no">c2</span>                <span class="no">setg</span>   <span class="nv">%dl</span>
<span class="err">7:</span>   <span class="err">48</span> <span class="err">85</span> <span class="nf">f6</span>                <span class="no">test</span>   <span class="nv">%rsi</span><span class="p">,</span><span class="nv">%rsi</span>
<span class="nl">a:</span>   <span class="err">0</span><span class="nf">f</span> <span class="mi">9</span><span class="no">e</span> <span class="no">c0</span>                <span class="no">setle</span>  <span class="nv">%al</span>
<span class="nl">d:</span>   <span class="err">84</span> <span class="nf">c2</span>                   <span class="no">test</span>   <span class="nv">%al</span><span class="p">,</span><span class="nv">%dl</span>
<span class="nl">f:</span>   <span class="err">75</span> <span class="err">07</span>                   <span class="nf">jne</span>    <span class="mh">18</span> <span class="p">&lt;</span><span class="no">exemplo2</span><span class="p">+</span><span class="mi">0x18</span><span class="p">&gt;</span>
<span class="err">11:</span>  <span class="err">48</span> <span class="err">89</span> <span class="nf">f8</span>                <span class="no">mov</span>    <span class="nv">%rdi</span><span class="p">,</span><span class="nv">%rax</span>
<span class="err">14:</span>  <span class="err">48</span> <span class="err">29</span> <span class="nf">f0</span>                <span class="no">sub</span>    <span class="nv">%rsi</span><span class="p">,</span><span class="nv">%rax</span>
<span class="err">17:</span>  <span class="nf">c3</span>                      <span class="no">retq</span>
<span class="err">18:</span>  <span class="err">48</span> <span class="err">8</span><span class="nf">d</span> <span class="mi">04</span> <span class="mi">37</span>             <span class="no">lea</span>    <span class="p">(</span><span class="nv">%rdi</span><span class="p">,</span><span class="nv">%rsi</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="nv">%rax</span>
<span class="err">1</span><span class="nl">c:</span>  <span class="nf">c3</span>                      <span class="no">retq</span>
</code></pre></div>

<p>Primeiramente, notamos que a função recebe dois argumentos (pois só utiliza <code>%rdi</code> e <code>%rsi</code>) e que ambos são tratados como <code>long</code>. Vamos então às expressões booleanas. Existem três expressões boolenas:</p>
<ol>
<li><code>cmp</code>-<code>setg</code>(linhas <code>0-4</code>) compara <code>%rdi</code> com <code>4</code> e seta <code>%dl=1</code> se <code>%rdi&gt;4</code> (**g**reater)</li>
<li><code>test-setle</code> (linhas <code>7-a</code>) compara <code>%rsi</code> com <code>0</code> e seta <code>%al=1</code> se <code>%rsi&lt;=0</code> (**l**ess or **e**qual).</li>
<li><code>test</code>(linha <code>d</code>) entre <code>%dl</code> e <code>%al</code>. O resultado não é armazenado.</li>
</ol>
<p>Logo abaixo do último <code>test</code> temos um <code>jne</code> (linha <code>f</code>), acrônimo para **j**ump if **n**ot **e**qual. Ou seja, fazemos o jump se <code>%dl &amp;&amp; %al</code> for verdadeiro.</p>
<p>Logo em seguida temos instruções aritméticas, que já estudamos nos últimos handouts. Assim como vimos nos slides, vamos converter este código para <strong>gotoC</strong> primeiro.</p>
<p>Assim como fizemos nos exercícios de 1 a 3, criaremos uma variável para as expressões booleanas 1 e 2 e substituiremos as instruções <code>test-jne</code> (linhas <code>d-f</code>) por um par <code>if-goto</code>. Veja abaixo:</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span> <span class="nf">exemplo2</span><span class="p">(</span><span class="kt">long</span> <span class="n">a</span><span class="p">,</span> <span class="kt">long</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">long</span> <span class="n">retval</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">expr1</span> <span class="o">=</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">expr2</span> <span class="o">=</span> <span class="n">b</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">expr1</span> <span class="o">&amp;&amp;</span> <span class="n">expr2</span><span class="p">)</span> <span class="k">goto</span> <span class="n">if1</span><span class="p">;</span>

    <span class="n">retval</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
    <span class="n">retval</span> <span class="o">-=</span> <span class="n">b</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">retval</span><span class="p">;</span>

    <span class="nl">if1</span><span class="p">:</span>
    <span class="n">retval</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">retval</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p>\pagebreak</p>
<p>Podemos então melhorar tornar este código mais legível, resultando no seguinte:</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span> <span class="nf">exemplo2</span><span class="p">(</span><span class="kt">long</span> <span class="n">a</span><span class="p">,</span> <span class="kt">long</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="mi">4</span> <span class="o">&amp;&amp;</span> <span class="n">b</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">a</span><span class="o">-</span><span class="n">b</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>Duas coisas importantes podem ser vistas neste código</p>
<ol>
<li>As comparações não são exatamente iguais (<code>a&gt;4</code> e <code>a&gt;=5</code>), mas são equivalentes.</li>
<li>O compilador pode trocar a ordem do <code>if/else</code> e colocar o <code>else</code> primeiro no Assembly gerado. Isto não altera o resultado da função, mas pode ser confuso de início.</li>
</ol>
<h3 id="arquivo-ex6">Arquivo <code>ex6</code><a class="headerlink" href="#arquivo-ex6" title="Permanent link">&para;</a></h3>
<p>O exercício abaixo usa <code>if-else</code>.</p>
<div class="highlight"><pre><span></span><code><span class="err">0000000000000000</span> <span class="err">&lt;</span><span class="nf">ex6</span><span class="err">&gt;</span><span class="p">:</span>
<span class="err">0:</span>   <span class="err">48</span> <span class="err">39</span> <span class="nf">f7</span>                <span class="no">cmp</span>    <span class="nv">%rsi</span><span class="p">,</span><span class="nv">%rdi</span>
<span class="err">3:</span>   <span class="err">7</span><span class="nf">e</span> <span class="mi">03</span>                   <span class="no">jle</span>    <span class="mh">8</span> <span class="p">&lt;</span><span class="no">ex6</span><span class="p">+</span><span class="mi">0x8</span><span class="p">&gt;</span>
<span class="err">5:</span>   <span class="err">48</span> <span class="err">89</span> <span class="nf">fe</span>                <span class="no">mov</span>    <span class="nv">%rdi</span><span class="p">,</span><span class="nv">%rsi</span>
<span class="err">8:</span>   <span class="err">48</span> <span class="err">85</span> <span class="nf">ff</span>                <span class="no">test</span>   <span class="nv">%rdi</span><span class="p">,</span><span class="nv">%rdi</span>
<span class="nl">b:</span>   <span class="err">7</span><span class="nf">e</span> <span class="mi">03</span>                   <span class="no">jle</span>    <span class="mh">10</span> <span class="p">&lt;</span><span class="no">ex6</span><span class="p">+</span><span class="mi">0x10</span><span class="p">&gt;</span>
<span class="nl">d:</span>   <span class="err">48</span> <span class="nf">f7</span> <span class="no">de</span>                <span class="no">neg</span>    <span class="nv">%rsi</span>
<span class="err">10:</span>  <span class="err">89</span> <span class="nf">f0</span>                   <span class="no">mov</span>    <span class="nv">%esi</span><span class="p">,</span><span class="nv">%eax</span>
<span class="err">12:</span>  <span class="nf">c3</span>                      <span class="no">retq</span>
</code></pre></div>

<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Traduza o código acima para <strong>gotoC</strong>.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Faça uma versão legível do código acima.</p>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../05-funcoes/" title="05 - Funções" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                05 - Funções
              </div>
            </div>
          </a>
        
        
          <a href="../07-loops/" title="07 - Loops" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                07 - Loops
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.d1f5a259.min.js"></script>
      <script src="../../assets/javascripts/bundle.d5fec882.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.fae956e7.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
      
        <script src="../../translate-admonitions.js"></script>
      
    
  </body>
</html>